{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u05E0\\u05D7\\u05DE\\u05D9 \\u05DE\\u05D5\\u05E0\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7/Documents/\\u05DB\\u05D9\\u05EA\\u05D4 \\u05D9\\u05D3/HouzzBootcamp/houzzProject/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/\\u05E0\\u05D7\\u05DE\\u05D9 \\u05DE\\u05D5\\u05E0\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7/Documents/\\u05DB\\u05D9\\u05EA\\u05D4 \\u05D9\\u05D3/HouzzBootcamp/houzzProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/\\u05E0\\u05D7\\u05DE\\u05D9 \\u05DE\\u05D5\\u05E0\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7/Documents/\\u05DB\\u05D9\\u05EA\\u05D4 \\u05D9\\u05D3/HouzzBootcamp/houzzProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/\\u05E0\\u05D7\\u05DE\\u05D9 \\u05DE\\u05D5\\u05E0\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7/Documents/\\u05DB\\u05D9\\u05EA\\u05D4 \\u05D9\\u05D3/HouzzBootcamp/houzzProject/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u05E0\\u05D7\\u05DE\\u05D9 \\u05DE\\u05D5\\u05E0\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7/Documents/\\u05DB\\u05D9\\u05EA\\u05D4 \\u05D9\\u05D3/HouzzBootcamp/houzzProject/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/\\u05E0\\u05D7\\u05DE\\u05D9 \\u05DE\\u05D5\\u05E0\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7/Documents/\\u05DB\\u05D9\\u05EA\\u05D4 \\u05D9\\u05D3/HouzzBootcamp/houzzProject/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/\\u05E0\\u05D7\\u05DE\\u05D9 \\u05DE\\u05D5\\u05E0\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7\\u05E7/Documents/\\u05DB\\u05D9\\u05EA\\u05D4 \\u05D9\\u05D3/HouzzBootcamp/houzzProject/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Button,Form}from'react-bootstrap';import WithRouter from'./WithRouter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateAndCreate=/*#__PURE__*/function(_React$Component){_inherits(UpdateAndCreate,_React$Component);var _super=_createSuper(UpdateAndCreate);function UpdateAndCreate(props){var _this;_classCallCheck(this,UpdateAndCreate);_this=_super.call(this,props);_this.newItem=void 0;_this.id=void 0;_this.id=_this.props.params.id?_this.props.params.id:\"\";_this.newItem={_id:\"\",instrument:\"\",description:\"\",price:0};_this.state={musicalInstrument:{_id:_this.id,instrument:\"\",description:\"\",price:0}};return _this;}_createClass(UpdateAndCreate,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.id!=\"\")){_context.next=8;break;}_context.next=3;return fetch(\"http://localhost:8080/music/\".concat(this.id));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;this.setState({musicalInstrument:data[0]});case 8:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"callToServer\",value:function(){var _callToServer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _method,requestOptions,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// create new product\nif(this.id===\"\"){_method='POST';}// update product\nelse _method='PUT';console.log(\"instrument: \"+this.state.musicalInstrument.instrument+\", description: \"+this.state.musicalInstrument.description);requestOptions={method:_method,headers:{'Content-Type':'application/json'},body:JSON.stringify(this.state.musicalInstrument)};_context2.next=5;return fetch(\"http://localhost:8080/music/\".concat(this.id),requestOptions);case 5:response=_context2.sent;_context2.next=8;return response.json();case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function callToServer(){return _callToServer.apply(this,arguments);}return callToServer;}()},{key:\"render\",value:function render(){var _this2=this;var musicalInstrument=this.state.musicalInstrument;var handleChange=function handleChange(changedValue,field){_this2.newItem=_objectSpread({},musicalInstrument);console.log(changedValue);switch(field){case\"instrument\":console.log(\"I am in musicalInstrument.instrument: \"+musicalInstrument.instrument);_this2.newItem.instrument=changedValue;break;case\"description\":console.log(\"i am in  musicalInstrument.description: \"+musicalInstrument.description);_this2.newItem.description=changedValue;break;case\"price\":console.log(\"i am in musicalInstrument.price: \"+musicalInstrument.price);_this2.newItem.price=parseInt(changedValue);break;}_this2.setState({musicalInstrument:_this2.newItem});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(){return _this2.callToServer();},children:[/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:musicalInstrument.instrument,onChange:function onChange(e){return handleChange(e.target.value,\"instrument\");}})}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:musicalInstrument.description,onChange:function onChange(e){return handleChange(e.target.value,\"description\");}})}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",value:musicalInstrument.price,onChange:function onChange(e){return handleChange(e.target.value,'price');}})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit\"})]})});}}]);return UpdateAndCreate;}(React.Component);export default WithRouter(UpdateAndCreate);","map":{"version":3,"names":["React","Button","Form","WithRouter","UpdateAndCreate","props","newItem","id","params","_id","instrument","description","price","state","musicalInstrument","fetch","response","json","data","setState","_method","console","log","requestOptions","method","headers","body","JSON","stringify","handleChange","changedValue","field","parseInt","callToServer","e","target","value","Component"],"sources":["C:/Users/נחמי מונקקקקקקקקקקק/Documents/כיתה יד/HouzzBootcamp/houzzProject/client/src/components/UpdateAndCreate.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Button, Form } from 'react-bootstrap';\r\nimport { IMusicalInstruments } from '../interfaces/IMusicalInstrument';\r\nimport WithRouter, { IWithRouterProps } from './WithRouter';\r\n\r\nclass UpdateAndCreate extends React.Component<IWithRouterProps, any> {\r\n    newItem: IMusicalInstruments;\r\n    id: string;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.id = this.props.params.id ? this.props.params.id : \"\";\r\n        this.newItem = { _id: \"\", instrument: \"\", description: \"\", price: 0 };\r\n        this.state = { musicalInstrument: { _id: this.id, instrument: \"\", description: \"\", price: 0 } }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        if (this.id != \"\") {\r\n            const response = await fetch(`http://localhost:8080/music/${this.id}`);\r\n            const data = await response.json();\r\n            this.setState({ musicalInstrument: data[0] })\r\n        }\r\n    }\r\n\r\n    async callToServer() {\r\n        let _method: string;\r\n        // create new product\r\n        if(this.id === \"\") {\r\n            _method = 'POST';\r\n        }\r\n        // update product\r\n        else _method = 'PUT';\r\n        console.log(\"instrument: \" + this.state.musicalInstrument.instrument + \", description: \" + this.state.musicalInstrument.description);\r\n        const requestOptions = {\r\n            method: _method,\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(this.state.musicalInstrument)\r\n        };\r\n        const response = await fetch(`http://localhost:8080/music/${this.id}`, requestOptions);\r\n        await response.json();\r\n    }\r\n\r\n    render() {\r\n        const { musicalInstrument } = this.state;\r\n\r\n        const handleChange = (changedValue: string, field: string) => {\r\n            this.newItem = { ...musicalInstrument }\r\n            console.log(changedValue);\r\n            switch (field) {\r\n                case \"instrument\":\r\n                    console.log(\"I am in musicalInstrument.instrument: \" + musicalInstrument.instrument);\r\n                    this.newItem.instrument = changedValue;\r\n                    break;\r\n                case \"description\":\r\n                    console.log(\"i am in  musicalInstrument.description: \" + musicalInstrument.description);\r\n                    this.newItem.description = changedValue;\r\n                    break;\r\n                case \"price\":\r\n                    console.log(\"i am in musicalInstrument.price: \" + musicalInstrument.price)\r\n                    this.newItem.price = parseInt(changedValue);\r\n                    break;\r\n            }\r\n            this.setState({ musicalInstrument: this.newItem });\r\n        };\r\n\r\n\r\n        return (\r\n            <div>\r\n                <Form onSubmit={() => this.callToServer()}>\r\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                        <Form.Control type=\"text\" value={musicalInstrument.instrument} onChange={(e) => handleChange(e.target.value, \"instrument\")} />\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                        <Form.Control type=\"text\" value={musicalInstrument.description} onChange={(e) => handleChange(e.target.value, \"description\")} />\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                        <Form.Control type=\"number\" value={musicalInstrument.price} onChange={(e) => handleChange(e.target.value, 'price')} />\r\n                    </Form.Group>\r\n                    <Button variant=\"primary\" type=\"submit\">Submit</Button>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default WithRouter(UpdateAndCreate);"],"mappings":"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"},"metadata":{},"sourceType":"module"}